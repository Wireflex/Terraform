Суть в том, чтобы не хранить код VPC,SG,EC2 в 1 файле и при изменении 1ого не проверять все остальные, поэтому раскидываем их по разным директориям

Для того, что связать их между собой - храним состояние в s3 (+dynamodb для блока) и связываем через data и outputs (можно вручную кэш прописывать айди vpc и sg, но эт пздц)

Создаём S3 - DynamoDB - VPC - SG - EC2

Удаляем в обратном порядке, terraform будет подсказывать
